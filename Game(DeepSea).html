<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="Style/main.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initia-scale=1.0">
    <title>FizğŸ£ - The DeepğŸ«§</title>
<link rel="stylesheet" href="Style/global.css">
</head>
<div id="sky">
<div class="ban-overlay" id="banOverlay"></div>

    <!-- Ban Popup -->
    <div class="ban-popup" id="banPopup">
        <h2>ğŸš« You are Banned!</h2>
        <p>Dear, <span>Fisher</span> You Have Break one of my rules, </p>
        <p><strong>Reason:</strong> <span id="banReason"></span></p>
        <p><strong>Banned By:</strong> <span id="bannedBy"></span></p>
        <p><strong>Time:</strong> <span id="banTime"></span></p>
        <p><strong>Case ID:</strong> <span id="caseID"></span></p>
        <button class="ban-btn"
        onclick="window.location.href='https://google.com'">Leave</button>
    </div>
<body>

    <div id="gameScreen">
      
<nav id="stickyNav">
    <h2>FizğŸ£</h2>
<small id="caughtStreakDisplay">Caught Streak: 0</small>
<small>Cash: â‚±<span id="cashCount">0</span></small>
</nav>

      <div class="FullMenuio">
<div class="exp-container">
    <span id="levelText">Level 1</span> 

</div>

        <h3><span>Username</span>'s Kit</h3>
        <script>
document.addEventListener("DOMContentLoaded", function() {
    let username = localStorage.getItem("username") || "Player"; // Default to "Player" if no username is set
    document.querySelector("h3 span").textContent = username;
});

        </script>

<p>Cash: â‚±<span id="cashCount">0</span></p>
<div id="weather-info">
    <h2>ğŸŒ¤ï¸ Weather Info</h2>
    <p><strong>Time of Day:</strong> <span id="timeOfDay">Day</span></p>
    <p><strong>Season:</strong> <span id="currentSeason">Spring</span></p>
    <p><strong>Weather:</strong> <span id="currentWeather">Clear</span></p>
</div>


<button id="openShop">ğŸ›’ Open Shop</button>
<button onclick="openFishIndex()">View Fish Index</button>

<div class="overlay" id="fishIndexOverlay">
    <div class="overlay-content">
        <button class="close-btn" onclick="closeFishIndex()">X</button>
        <h2>Fish Index</h2>
        <input type="text" id="fishSearch" oninput="searchFish()" placeholder="Search Fish..." />
        <div id="fishListContainer"></div>
    </div>
</div>

<h4>ğŸ£Rod Equipment</h4>
<select id="rodSelect"></select>
<figure></figure>
<div id="rodStats"></div>




<div id="shopPopup" style="display: none;">
    <h2>ğŸ›ï¸ Fishing Rod Shop</h2>
    <div id="shopItems"></div>
    <button id="closeShop">Close</button>
</div>
</div>
<div id="customAlert" style="display: none;">
    <p id="alertMessage"></p>
    <button id="closeAlert">OK</button>
</div>
<div class="area-container">
<fieldset class="area">
  <img src="">
  <h3>ğŸª¸Deep Sea CanyonğŸ«§</h3>
  <p>a dark of abys of canyonğŸ‘€ğŸ«§</p>
  <p>Rumbling sounds are been heard along of the coastâš ï¸</p>
  <center>
        <button id="StartButtonFish" onclick="startFishing('DEEPSEACANYON')">ğŸ£
        Fish on
        here</button>
  </center>
</fieldset>
</div>
<div class="area-container">
<fieldset class="area" style="margin-top:1000px;">
  <h3>Bill Board</h3>
<p> Ads:</p>
<script type="text/javascript">
	atOptions = {
		'key' : 'e8ba9bd749df815e35f948cc1889b85b',
		'format' : 'iframe',
		'height' : 250,
		'width' : 300,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/e8ba9bd749df815e35f948cc1889b85b/invoke.js"></script>
</fieldset>
</div>
<div class="area-container">
<fieldset class="area" style="margin-top:9000px;">
  <h3>ğŸŒŒTwilight Depths (1,000m)</h3>
  <p>Dimly lit, home to strange deep-sea fish.</p>
 
  <center>
        <button id="StartButtonFish" onclick="startFishing('TWILIGHTTRENCH')">ğŸ£ Fish
        on Ocean</button>
  </center>
</fieldset>
</div>
<div class="area-container">
<fieldset class="area" style="margin-top:1000px;">
  <h3>Bill Board</h3>
<p> Ads:</p>
<script type="text/javascript">
	atOptions = {
		'key' : 'e8ba9bd749df815e35f948cc1889b85b',
		'format' : 'iframe',
		'height' : 250,
		'width' : 300,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/e8ba9bd749df815e35f948cc1889b85b/invoke.js"></script>
</fieldset>
</div>
<div class="area-container">
<fieldset class="area" style="margin-top: 5000px;">
  <h3>ğŸ«§Midnight Trench (3,000m)ï¸</h3>
  <p>No sunlight, mysterious and dangerous creatures lurk.</p>
  <center>
        <button id="StartButtonFish" onclick="startFishing('MIDNIGHTTRENCH')">ğŸ£ Fish
        on Ocean</button>
  </center>
</fieldset>
</div>
<div class="area-container">
<fieldset class="area" style="margin-top:1000px;">
  <h3>Bill Board</h3>
<p> Ads:</p>
<script type="text/javascript">
	atOptions = {
		'key' : 'e8ba9bd749df815e35f948cc1889b85b',
		'format' : 'iframe',
		'height' : 250,
		'width' : 300,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/e8ba9bd749df815e35f948cc1889b85b/invoke.js"></script>
</fieldset>
</div>
<div class="area-container">
<fieldset class="area" style="margin-top: 50000px;">
  <h3>ğŸ«§Thermocline Layer</h3>
  <p>A Huge Sand Layer which covers the unknown parts of the oceanğŸ‘€</p>
</fieldset>
</div>
<div class="area-container">
<fieldset class="area" >
  <h3>ğŸ«§ğŸŸPheristoric Shift Area (50,000m)</h3>
  <p>A Huge Sand Layer which covers the unknown parts of the oceanğŸ‘€</p>
  <center>
        <button id="StartButtonFish" onclick="startFishing('PHERISTORICSHIFTTRENCH')">ğŸ£ Fish
        on Ocean</button>
  </center>
</fieldset>
</div>

<button id="inventoryButton">ğŸ’ Inventory</button>

<!-- ğŸ”¹ Inventory Pop-Up -->
<div id="inventoryPopup">
    <div id="inventoryContent">

        <h3 style="color:white;">ğŸ£ Fish Inventory</h3>
        <button onclick="sellAllExceptRare()">Sell All (Except Rare)</button>
<input type="text" id="inventorySearch" placeholder="Search for a fish..." oninput="updateInventoryUI()">
<div id="inventory"></div>
   </div>
</div>


<div id="miniGame" style="display: none; text-align: center; background: #222; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); color: white;">
    <p style="color: cyan; text-shadow: 0px 0px 5px cyan;">Catch the Fish!</p>
<figure></figure>
    <small id="minusProgressText" style="color: red; font-size: 18px; font-weight:
    bold; text-shadow: 0px 0px 10px red;"></small> 

    <!-- Exclamation Mark for Rarity -->
    <div id="exclamationMark" class="exclamation-mark" style="display: none;">!</div>

    <!-- Progress Bar & Fish -->
    <div id="progressContainer">
        <div id="progressBar"></div>
        <div id="fishIcon">ğŸŸ</div>
    </div>

<div id="comboMessage" style="position: absolute; font-size: 24px; font-weight: bold; color: gold; 
    text-shadow: 0px 0px 10px gold; display: none; pointer-events: none;">
</div>

    <div id="rodWheelContainer">
        <button id="tapButton" onclick="tapButton()">ğŸ£</button>
    </div>
</div>
<figure style="color:#111111;">
The abyss whispers secrets only the drowned can hear. Beneath the waves, where light dares not reach, it waitsâ€”its form shifting, its tendrils reaching beyond time. The stars are not misalignedâ€¦ yet. But when they are, the deep one will rise, and the dreamers will awaken.
</figure>
</div>

    <script defer src="ServerServiceScript/alertsSYSTEM.js"></script>
<script defer src="ServerServiceScript/main.js"></script> <!-- Main after Rod -->
<script defer src="ServerServiceScript/Rod.js"></script> <!-- Load Rod.js First -->

<script defer src="ServerServiceScript/Shopitem.js"></script>
<script defer src="ServerServiceScript/BannedChecker.js"></script>
<script defer src="ServerServiceScript/DeepseaAudioSoundSfx.js"></script>


</body>
</html>

<audio id="musicgameSFX" src="Sounds/sfx-bg.mp3" loop></audio>
<audio id="Music-Background" src="Sounds/BGM.mp3" loop></audio>

<script>// JUST SOUND MECHANICS DONT TOUCH IT OR I TOUCH YOU

</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const inventoryButton = document.getElementById("inventoryButton");
    const inventoryPopup = document.getElementById("inventoryPopup");
    const closeInventory = document.getElementById("closeInventory");

    // Toggle Inventory on Button Click
    inventoryButton.addEventListener("click", function () {
        inventoryPopup.style.display = (inventoryPopup.style.display === "block") ? "none" : "block";
    });

    // Close Inventory on Close Button Click
    closeInventory.addEventListener("click", function () {
        inventoryPopup.style.display = "none";
    });

    // Close Inventory on Outside Click
    window.addEventListener("click", function (event) {
        if (event.target === inventoryPopup) {
            inventoryPopup.style.display = "none";
        }
    });
});



</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    // Check if user is registered
    if (!localStorage.getItem("userRegistered")) {
        window.location.href = "index.html"; // Redirect to register page if not registered
    }
});


</script>

<script>//EVENTS AND MORE
const numParticles = 50;
const numFish = 5;
const floatingContainer = document.createElement("div");
floatingContainer.classList.add("floating-background");
document.body.appendChild(floatingContainer);

// Generate floating particles
for (let i = 0; i < numParticles; i++) {
    let particle = document.createElement("div");
    particle.classList.add("particle");
    particle.style.left = Math.random() * 100 + "vw";
    particle.style.animationDelay = Math.random() * 5 + "s";
    particle.style.width = particle.style.height = Math.random() * 5 + 2 + "px";
    floatingContainer.appendChild(particle);
}

// Generate scary fish shadows
for (let i = 0; i < numFish; i++) {
    let fish = document.createElement("div");
    fish.classList.add("fish-shadow");
    fish.style.left = Math.random() * 100 + "vw";
    fish.style.top = Math.random() * 100 + "vh";
    fish.style.animationDuration = Math.random() * 8 + 4 + "s";
    fish.style.width = Math.random() * 200 + 50 + "px";
    fish.style.height = Math.random() * 100 + 30 + "px";
    floatingContainer.appendChild(fish);
}
const area = document.querySelector(".area");

for (let i = 0; i < 20; i++) {
    let particle = document.createElement("div");
    particle.classList.add("particle");
    resetParticle(particle); // Set initial position
    area.appendChild(particle);
    animateParticle(particle); // Start animation
}

function resetParticle(particle) {
    particle.style.left = Math.random() * 100 + "%"; // Random horizontal position
    particle.style.top = Math.random() * 100 + "%"; // Random vertical position
    particle.style.width = particle.style.height = Math.random() * 6 + "px";
}

function animateParticle(particle) {
    let duration = Math.random() * 5 + 5; // Random speed between 5-10s
    particle.style.animation = `floatLoop ${duration}s linear infinite`;
}


</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    checkBanStatus(); // Check ban status on page load
});

window.addEventListener("storage", function (event) {
    if (event.key === "bannedUsers") {
        checkBanStatus(); // Recheck ban status if localStorage changes
    }
});

function checkBanStatus() {
    let username = localStorage.getItem("username");
    let bannedUsers = JSON.parse(localStorage.getItem("bannedUsers")) || [];

    if (username) {
        let bannedUser = bannedUsers.find(user => user.username === username);

        if (bannedUser) {
            let banExpiry = bannedUser.expiry ? new Date(bannedUser.expiry).getTime() : null;
            let now = Date.now();

            if (bannedUser.permanent || (banExpiry && now < banExpiry)) {
                showBanPopup(bannedUser);
            } else {
                // Remove expired bans
                let updatedBannedUsers = bannedUsers.filter(user => user.username !== username);
                localStorage.setItem("bannedUsers", JSON.stringify(updatedBannedUsers));
            }
        }
    }
}

</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    setTimeout(function () {
        let level = parseInt(localStorage.getItem("level")) || 0;
        console.log("Player Level:", level); // Debugging

        if (level >= 35) {
            console.log("Player verified");
        } else {
            alert("You need to be at least Level 35 to enter the deep sea!"); 
            console.log("Player Kicked");

            setTimeout(() => {
                window.location.href = "Game.html";
            }, 50); // Short delay to let alert show
        }
    }, 200); // 2-second delay before checking
});

</script>

<style>
 body {
    margin: 0;
    padding: 0;
    min-height: 200vh; /* Allows scrolling */
    background: black; /* Deep dark abyss */
    overflow-x: hidden; /* Prevents horizontal scroll */
    position: relative;
}

.area {
    margin-top: 10px;
    border: 1px solid #000;
    padding: 10px;
    background: #f9f9f9;
    width: 100%;
    max-width: 90%;
    margin: 10px auto; /* âœ… Fix: Center the area */
}

/* Center `.area` on larger screens */
@media (min-width: 768px) { 
    .area {
        max-width: 50%;
    }
}

/* Container for floating elements (keeps them separate from UI) */
.floating-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1; 
    pointer-events: none;
}

/* Falling Particles */
@keyframes fall {
    0% { transform: translateY(-10px) scale(1); opacity: 0.8; }
    100% { transform: translateY(100vh) scale(0.5); opacity: 0; }
}

@keyframes floatLoop {
    0% { transform: translateY(0px) scale(1); opacity: 0.2; }
    100% { transform: translateY(100vh) scale(1.2); opacity: 0; }
}

.particle {
    position: absolute;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    animation: fall 10s linear infinite; /* âœ… Fix: Apply animation */
}

/* Randomize animation speed */
.particle:nth-child(odd) { animation-duration: 7s; }
.particle:nth-child(even) { animation-duration: 10s; }

/* Scary Fish Shadows */
@keyframes fish-move {
    0% { transform: translateX(-50px) scale(1); opacity: 0.3; }
    50% { transform: translateX(50px) scale(1.2); opacity: 0.1; }
    100% { transform: translateX(-50px) scale(1); opacity: 0.3; }
}

.fish-shadow {
    position: absolute;
    width: 150px;
    height: 80px;
    background: rgba(0, 0, 0, 0.4);
    filter: blur(5px); /* âœ… Fix: Reduce blur for clarity */
    border-radius: 50%;
    animation: fish-move 6s ease-in-out infinite alternate;
}

</style>